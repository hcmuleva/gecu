var T=Object.create;var h=Object.defineProperty;var C=Object.getOwnPropertyDescriptor;var W=Object.getOwnPropertyNames;var B=Object.getPrototypeOf,G=Object.prototype.hasOwnProperty;var J=(r,o)=>{for(var t in o)h(r,t,{get:o[t],enumerable:!0})},H=(r,o,t,s)=>{if(o&&typeof o=="object"||typeof o=="function")for(let e of W(o))!G.call(r,e)&&e!==t&&h(r,e,{get:()=>o[e],enumerable:!(s=C(o,e))||s.enumerable});return r};var $=(r,o,t)=>(t=r!=null?T(B(r)):{},H(o||!r||!r.__esModule?h(t,"default",{value:r,enumerable:!0}):t,r)),K=r=>H(h({},"__esModule",{value:!0}),r);var rr={};J(rr,{AuthHelper:()=>Y,DataProvider:()=>X,axiosInstance:()=>E,generateFilter:()=>x,generateNestedFilterField:()=>M,generateSort:()=>w,getValueProps:()=>Z,mapOperator:()=>m,mediaUploadMapper:()=>U,normalizeData:()=>d,transformErrorMessages:()=>O,transformHttpError:()=>y});module.exports=K(rr);var g=$(require("qs"));var m=r=>{switch(r){case"startswith":return"startsWith";case"endswith":return"endsWith";case"nin":return"notIn";case"ncontains":return"notContainsi";case"ncontainss":return"notContains";case"containss":return"contains";case"contains":return"containsi";case"nnull":return"notNull"}return r};var F=$(require("qs")),M=r=>{let o=r.split(".");if(o.length>1){let t="";return o.forEach(s=>{t+=`[${s}]`}),t}return`[${o[0]}]`},L=(r,o="")=>{let{field:t,operator:s,value:e}=r,n="",a=m(s);return Array.isArray(e)?e.map((i,c)=>{n+=`&filters${o}${M(t)}[$${a}][${c}]=${i}`}):n+=`&filters${o}${M(t)}[$${a}]=${e}`,n},P=(r,o="")=>{let t="";return r.value.map((s,e)=>{s.operator!=="or"&&s.operator!=="and"&&"field"in s?t+=L(s,`${o}[$${r.operator}][${e}]`):t+=P(s,`${o}[$${r.operator}][${e}]`)}),t},x=r=>{let o="";r&&r.map(e=>{e.operator!=="or"&&e.operator!=="and"&&"field"in e?o+=L(e):o+=P(e)});let t=F.default.parse(o,{depth:15});return F.default.stringify(t,{encodeValuesOnly:!0})};var w=r=>{let o=[];return r&&r.map(t=>{t.order&&o.push(`${t.field}:${t.order}`)}),o};var Q=$(require("axios")),E=Q.default.create();E.interceptors.response.use(r=>r,r=>{var t,s,e;let o={...r,message:(s=(t=r.response)==null?void 0:t.data)==null?void 0:s.message,statusCode:(e=r.response)==null?void 0:e.status};return Promise.reject(o)});var j=r=>r.attributes?{id:r.id,...r.attributes}:r,k=r=>Object.prototype.toString.call(r)==="[object Object]",d=r=>{if(Array.isArray(r))return r.map(o=>d(o));if(k(r)){Array.isArray(r.data)?r=[...r.data]:k(r.data)?r=j({...r.data}):r.data===null?r=null:r=j(r);for(let o in r)r[o]=d(r[o]);return r}return r};var O=r=>{let o={};for(let t of r){let s=t.path[0];o[s]?o[s].push(t.message):o[s]=[t.message]}return o};var y=r=>{var a,i,c;let o=((i=(a=r==null?void 0:r.response)==null?void 0:a.data)==null?void 0:i.error)||{},t=o==null?void 0:o.message,s=o==null?void 0:o.status,e=((c=o==null?void 0:o.details)==null?void 0:c.errors)||[];return{statusCode:s,message:t,errors:O(e)}};var X=(r,o=E)=>({getList:async({resource:t,pagination:s,filters:e,sorters:n,meta:a})=>{var v,I,q;let i=`${r}/${t}`,{current:c=1,pageSize:p=10,mode:u="server"}=s??{},l=a==null?void 0:a.locale,f=a==null?void 0:a.fields,V=a==null?void 0:a.populate,R=a==null?void 0:a.publicationState,S=w(n),_=x(e),N={...u==="server"?{"pagination[page]":c,"pagination[pageSize]":p}:{},locale:l,publicationState:R,fields:f,populate:V,sort:S.length>0?S.join(","):void 0},{data:b}=await o.get(`${i}?${g.default.stringify(N,{encodeValuesOnly:!0})}&${_}`);return{data:d(b),total:((I=(v=b.meta)==null?void 0:v.pagination)==null?void 0:I.total)||((q=d(b))==null?void 0:q.length)}},getMany:async({resource:t,ids:s,meta:e})=>{let n=`${r}/${t}`,a=e==null?void 0:e.locale,i=e==null?void 0:e.fields,c=e==null?void 0:e.populate,p=e==null?void 0:e.publicationState,u=x([{field:"id",operator:"in",value:s}]),l={locale:a,fields:i,populate:c,publicationState:p,"pagination[pageSize]":s.length},{data:f}=await o.get(`${n}?${g.default.stringify(l,{encodeValuesOnly:!0})}&${u}`);return{data:d(f)}},create:async({resource:t,variables:s})=>{let e=`${r}/${t}`,n={data:s};t==="users"&&(n=s);try{let{data:a}=await o.post(e,n);return{data:a}}catch(a){throw y(a)}},update:async({resource:t,id:s,variables:e})=>{let n=`${r}/${t}/${s}`,a={data:e};t==="users"&&(a=e);try{let{data:i}=await o.put(n,a);return{data:i}}catch(i){throw y(i)}},updateMany:async({resource:t,ids:s,variables:e})=>{let n=[],a=await Promise.all(s.map(async i=>{let c=`${r}/${t}/${i}`,p={data:e};t==="users"&&(p=e);try{let{data:u}=await o.put(c,p);return u}catch(u){let l=y(u);n.push(l)}}));if(n.length>0)throw n;return{data:a}},createMany:async({resource:t,variables:s})=>{let e=[],n=await Promise.all(s.map(async a=>{try{let{data:i}=await o.post(`${r}/${t}`,{data:a});return i}catch(i){let c=y(i);e.push(c)}}));if(e.length>0)throw e;return{data:n}},getOne:async({resource:t,id:s,meta:e})=>{let n=e==null?void 0:e.locale,a=e==null?void 0:e.fields,i=e==null?void 0:e.populate,c=e==null?void 0:e.publicationState,p={locale:n,fields:a,populate:i,publicationState:c},u=`${r}/${t}/${s}?${g.default.stringify(p,{encode:!1})}`,{data:l}=await o.get(u);return{data:d(l)}},deleteOne:async({resource:t,id:s})=>{let e=`${r}/${t}/${s}`,{data:n}=await o.delete(e);return{data:n}},deleteMany:async({resource:t,ids:s})=>({data:await Promise.all(s.map(async n=>{let{data:a}=await o.delete(`${r}/${t}/${n}`);return a}))}),getApiUrl:()=>r,custom:async({url:t,method:s,filters:e,sorters:n,payload:a,query:i,headers:c})=>{let p=`${t}?`;if(n){let f=w(n);f.length>0&&(p=`${p}&${g.default.stringify({sort:f.join(",")})}`)}if(e){let f=x(e);p=`${p}&${f}`}i&&(p=`${p}&${g.default.stringify(i)}`);let u;switch(s){case"put":case"post":case"patch":u=await o[s](t,a,{headers:c});break;case"delete":u=await o.delete(t,{data:a,headers:c});break;default:u=await o.get(p,{headers:c});break}let{data:l}=u;return Promise.resolve({data:l})}});var D=require("@refinedev/core"),A=$(require("axios")),z=$(require("qs")),Y=r=>({login:async(o,t)=>{let s=`${r}/auth/local`;return await A.default.post(s,{identifier:o,password:t})},me:async(o,t)=>{let{metaData:s,meta:e}=t??{},n=(0,D.pickNotDeprecated)(e,s),a=n==null?void 0:n.locale,i=n==null?void 0:n.fields,c=n==null?void 0:n.populate,p={locale:a,fields:i,populate:c};return await A.default.get(`${r}/users/me?${z.default.stringify(p,{encodeValuesOnly:!0})}`,{headers:{Authorization:`Bearer ${o}`}})}});var Z=(r,o)=>r?{file:r.file,fileList:r.fileList??(Array.isArray(r)?r:[r]).map(t=>{let s={name:t.name,percent:t.percent,size:t.size,status:t.status,type:t.mime||t.type,uid:t.id};return t.url&&(s.url=`${o}${t.url}`),s})}:{fileList:[]},U=r=>(Object.keys(r).map(o=>{if(r[o]){let t=r[o].fileList;if(Array.isArray(t)){let e=[];for(let n of t)if(n.response)for(let a of n.response)e.push(a.id);else e.push(n.uid);r[o]=e}}}),r);
//# sourceMappingURL=index.cjs.map